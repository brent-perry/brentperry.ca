import { objectMap } from "../tools/object-map.js";
import { isObject } from "../identities/is-object.js";
import { isFunction } from "../identities/is-function.js";
export function toBusiness() {
    return function recurse({ topic, getAuth }) {
        return objectMap(topic, (value, key) => {
            if (isFunction(value))
                return async (...args) => value(await getAuth(), ...args);
            else if (isObject(value))
                return recurse({ topic: value, getAuth });
            else
                throw new Error(`unknown topic subtype for "${key}"`);
        });
    };
}
//# sourceMappingURL=to-business.js.map