import { asTopic } from "renraku/x/identities/as-topic.js";
import { fetchUser } from "./login/user/fetch-user.js";
import { makePermissionsEngine } from "../../../assembly/backend/permissions2/permissions-engine.js";
export const userTopic = ({ config }) => asTopic()({
    async getUser({ tables, access }, { userId }) {
        const permissionsEngine = makePermissionsEngine({
            isPlatform: access.appId === config.platform.appDetails.appId,
            permissionsTables: tables.permissions,
        });
        return await fetchUser({ userId, authTables: tables, permissionsEngine });
    },
});
//# sourceMappingURL=user-topic.js.map