import { ops } from "../../../../../../framework/ops.js";
export function adminManagerControls({ app, state, actions, manageAdminsService }) {
    const { appId } = app;
    const load = (firstStep = Promise.resolve(undefined)) => (ops.operation({
        promise: firstStep
            .then(() => manageAdminsService.listAdmins({ appId })),
        setOp: admins => actions.setAdmins(admins)
    }));
    async function listAdmins() {
        await load();
    }
    async function assignAdmin() {
        const { email } = state.assignerDraft;
        actions.setAssignerDraft({ email: undefined });
        await load(manageAdminsService.assignAdmin({ appId, email }));
    }
    async function revokeAdmin(userId) {
        await load(manageAdminsService.revokeAdmin({ appId, userId }));
    }
    return { listAdmins, assignAdmin, revokeAdmin };
}
//# sourceMappingURL=admin-manager-controls.js.map